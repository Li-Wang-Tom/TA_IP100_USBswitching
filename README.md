# PIC USB切替器

PIC12F683を使用したUSBマウス・キーボード切替装置のファームウェア

## 🧩 主な機能

- **2PC間USB切替** - 1つのスイッチで2台のPC間を切替
- **チャタリング対策** - 安定したスイッチ動作を実現
- **LED状態表示** - 現在の接続状況を視覚的に確認

## 💻 動作環境

- PIC12F683マイコン
- 内蔵オシレータ 8MHz
- プルアップ抵抗付きスイッチ入力

## 📦 ハードウェア構成

### ピン配置

| ピン  | 機能  | 説明                 |
| --- | --- | ------------------ |
| GP0 | 出力  | ASTERION マウス制御     |
| GP1 | 出力  | GATEWAY PC マウス制御   |
| GP2 | 出力  | LED切替制御（NOTゲート経由）  |
| GP3 | 入力  | 切替スイッチ（プルアップ抵抗付き）  |
| GP4 | 出力  | GATEWAY PC キーボード制御 |
| GP5 | 出力  | ASTERION キーボード制御   |

### 回路仕様

- **入力プルアップ抵抗** - スイッチ入力の安定化
- **NOTゲート** - GP2でLED切替（シュミットトリガ無し）
- **インバータ回路** - LED制御用

## 🚀 動作仕様

### 切替ロジック

**GP3 = H（スイッチ未押下）**

- USB系統1 → ASTERION PC接続
- GP0=1, GP5=1 (ASTERION マウス・キーボードON)
- GP1=0, GP4=0 (GATEWAY PC OFF)

**GP3 = L（スイッチ押下）**

- USB系統2 → GATEWAY PC接続
- GP1=1, GP4=1 (GATEWAY PC マウス・キーボードON)
- GP0=0, GP5=0 (ASTERION OFF)

### チャタリング対策機能

- **20ms安定化待機** - スイッチ状態変化時
- **トグル変数管理** - 連続押下防止
- **状態記憶処理** - 前回状態との比較

## 

## ## 🔧 開発環境

### 必要ソフトウェア

- **MPLAB X IDE** - Microchip統合開発環境
- **XC8コンパイラ** - PIC用Cコンパイラ
- **PICkit3/4** - 書き込み・デバッグツール

### コンフィグレーション

- 内蔵オシレータ使用
- ウォッチドッグタイマ無効
- パワーアップタイマ有効
- MCLR機能無効

## 🛠️ 開発者向け情報

### ファイル構成

```
main.c                    # メインプログラム
├─ インクルードファイル      # 標準ライブラリ
├─ コンフィグ設定           # PIC動作設定
├─ マクロ定義              # ピン名・クロック定義
├─ 初期化処理              # GPIO・レジスタ設定  
└─ メインループ            # 切替・チャタリング処理
```

### 主要関数・処理

- `main()` - メイン処理・初期化
- チャタリング対策ロジック - 20ms待機処理
- トグル状態管理 - スイッチ状態記憶
- GPIO制御 - 出力ピン切替処理

## 🤝 貢献方法

1. フォークしてください
2. フィーチャーブランチを作成（`git checkout -b feature/amazing-feature`）
3. 変更をコミット（`git commit -m 'Add amazing feature'`）
4. ブランチにプッシュ（`git push origin feature/amazing-feature`）
5. プルリクエストを作成

## 📝 License

This project is licensed under the MIT License.  
See the [LICENSE](https://claude.ai/chat/LICENSE) file for details.

## 👨‍💻 作者

**Technoalpha Tomono**

- Company: テクノアルファ株式会社

## 🙏 謝辞

このプロジェクトは PIC マイコンと組み込み開発コミュニティの優れた技術を活用しています。

すべての組み込みエンジニアの皆様に感謝いたします。

本项目的开发离不开以下优秀的技术和社区支持：

- **Microchip Technology** - PIC マイコンの優れたアーキテクチャを提供
- **MPLAB X IDE** - 統合開発環境での開発支援
- **XC8 コンパイラ** - 効率的なコード生成とデバッグ機能
- **組み込み開発コミュニティ** - 技術情報の共有と相互支援
- **GitHub** - オープンソースプロジェクトの素晴らしいプラットフォーム

感谢所有为嵌入式开发事业贡献力量的工程师们！

没有你们的努力，就没有这个项目的诞生。

谢谢大家！🎉